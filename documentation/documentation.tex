\documentclass[a4paper, 12pt]{article}
\usepackage[margin = 2.5cm]{geometry}

\usepackage[utf8]{inputenc}
\usepackage[OT2, T1]{fontenc}
\usepackage[english, serbian]{babel}
\usepackage[none]{hyphenat}

\usepackage{amsfonts, amssymb, amsmath}
\usepackage{graphicx, wrapfig, float, enumitem, hyperref, chngcntr, ragged2e, pgfplots}

\counterwithout{enumi}{section}

\title{Projekat iz primene senzora i aktulatora}
\author{Vladimir Galović i Stefan Ostojić}
\date{\today}

\begin{document}

\begin{titlepage}

\begin{center}
\includegraphics[scale=0.5]{images/ftn_logo}

\vspace{3cm}

\begin{Large}
\textbf{PROJEKAT IZ PRIMENE SENZORA I AKTUATORA}
\end{Large}
\end{center}

\vspace{1.5cm}

\begin{table}[H]
\def \arraystretch{1.25}

\setlength\parindent{16pt}
\textbf{NAZIV PROJEKTA:}\\[7pt]
\begin{tabular}{|p{16cm}|}
\hline
\setlength\parindent{10pt}
Regulator temperature i vlažnosti vazduha\\
\hline
\end{tabular}

\vspace{0.5cm}

\textbf{TEKST ZADATKA:}\\[7pt]
\begin{tabular}{|p{16cm}|}
\hline
\setlength\parindent{10pt}
Čitanje i kontrolisanje temperature i vlažnosti vazduha u zatvorenoj sredini.\\
\hline
\end{tabular}

\vspace{0.5cm}

\textbf{MENTOR PROJEKTA:}\\[7pt]
\begin{tabular}{|p{16cm}|}
\hline
\setlength\parindent{10pt}
Prof. Jovan Bajić\\
\hline
\end{tabular}

\vspace{0.5cm}

\textbf{PROJEKAT IZRADILI:}\\[7pt]
\begin{tabular}{|p{16cm}|}
\hline
\setlength\parindent{10pt}
Vladimir Galović (EE 210/2018) i Stefan Ostojić (EE 216/2016)\\
\hline
\end{tabular}

\vspace{0.5cm}

\textbf{DATUM ODBRANE PROJEKTA:}\\[7pt]
\begin{tabular}{|p{16cm}|}
\hline
\setlength\parindent{10pt}
\today \\
\hline
\end{tabular}
\end{table}
\end{titlepage}

\tableofcontents
\pagebreak

\begingroup
\justifying

\section{Uvod}

\vspace{10pt}

Regulacija temperature i vlažnosti vazduha

\vspace{10pt}

Ova tema je izabrana zbog interesovanja za rad sa DHT22 senzorom dok su sve ostale funkcionalnosti dodate tokom realizacije projekta. Sa ovim snezorom kao prvom tačkom projekta izabran je problem čitanja i regulisanja temperature i vlažnosti vazduha neke zatvorene sredine poput nekog skadišta gde je održavanje temperature i vlažnosti bitno. Primer za ovakav uređaj je humidor za cigare koji održva konstantnu temperaturu (16-22 °C) i vlažnost (60-75 \%) kako bi održao kvalitet cigare (Slika \ref{primer}).

\vspace{10pt}

  Zarad brze i lake realizacije kao osnovna kontrolna jedinica izabrana je Arduiono pltforma koja pruža puno fleksibilnosti. Za aktuator je izabran BLDC motor sa ventilatorom koji bi najbrže uticao na regulisanje temperature i vlažnosti. LCD displej i tastatura su dodate radi lakše interakcije sa korisnikom, a uloga zujalice je da upozori korisnika na prevelike ili premale vrednosti vlažnosti vazduha. 

\vspace{10pt}


Realizacija i upoznavanje sa svim karakteristikama komopnenti je započeta povezivanjem osnovih elemenata na protoboard i Arduino UNO. Pojedinačnim upoznavanjem sa svakom komponentom je smišljen krajni koncept projekta. Kao i ideje za adekvatano testiranje senzora i aktuatora. 

\vspace{10pt}


\begin{figure}[H]
\centering
\includegraphics[scale=0.13]{images/primer}
\caption{humidor za cigare} \label{primer}
\end{figure}

\pagebreak
\endgroup

\begingroup
\justifying

\section{Analiza problema}

Regulacija temperature i vlažnosti vazduha neke zatvorene sredine zahteva održanje ove dve vrednosti na prethodno zadatoj konstanti. Humidor održava obe vrednosti veoma precizno čime se kvalitet i ukus cigra ne menja. Da bi to postigao humidor mora imati elemete koji utiču na povećanje i na elemente koji utiču na smanjenje temperature i vlažnosti vazduha. 

\vspace{10pt}

Za povećanje temperature se koriste grejači, a za povećnje vlažnosti vazduha neki izvor vode ili prskalice. Dok za smanjenje i temperature i vlažnosti vazduha se koriste razne vrste ventilatora koji cirkulacijom vazduha smanjuju ove dve vrednosti. Na smanjenje vlažnsti čak utiče i vrsta drveta od koje je humidor napravlje. Kompleksnost nastaje pri delikatnom balansu ove dve celine, povećavanje i smanjivanje temperature i vlažnosti vazduha. Oba segmenta moraju biti proporcionalno aktivni kako bi održali unutrašnjost konstantnom, bez obzira na promene spoljašnje sredine u kojoj se Humidor nalazio.

\vspace{10pt}

Zarad pojednostavljivanja i lakše realizacije fokus se stavlja samo na proces smanjivanja temperature i vlažnosti vazduha. Za ovaj proces je samo potreban jedan aktuator. Koji je u primeru ovog projekta BLDC motor sa ventilatorom. Dok bi u procesu povećanja temperature i vlažnosti vazduha morali da imam bar dva aktuatora. Grejač i neki sistem vodenih pumpi koji bi distribuitao vodu u odgarajućoj meri. Čime bi se obim i kompleksnost ovog projekta znatno povećao. Ovim pojednostaviljanjem dolazi i do promena merenih vrenosti jer bez dodatnih komponenti naša sredina neće održavati temperaturu i vlažnost kao Hunidor nego kao srednju vrednost prostorije. U tabeli \ref{tabela-1} može se videti razlika između promena mernih vrednost Humidora i ovog projekta.

\vspace{10pt}

\begin{table}[H]
\centering
\begin{tabular}{|l|c|c|}
\hline
& Vlažnost & Temperatura\\
\hline
Humidor & 60 - 75 \% & 16 - 22 °C\\
\hline
Srednja vrednost prostorije & 30 - 80 \% & 26 - 30 °C\\
\hline
\end{tabular}
\caption{Promea merenih vrednosti} \label{tabela-1}
\end{table}

Spajanjem senzora DHT22 i BLDC ventilatora se ostvaruje regulacija temperature i vlažnosti vazduha, iako u suženom obliku. Dok sve ostale komponente doprinose boljoj interakciji korisnika sa uređajom. Regulacija je glavni cilj, dok je interfejs sporedni.

%Veoma važan deo projektnog rada. Naslov se po potrebi može promeniti, ali suština teksta mora da ostane analiza problema.
%
%Treba jasno istaći šta su glavni (i sporedni) ciljevi koji žele da se postignu razvojem novog uređaja. Treba navesti postojeća rešenja ukoliko postoje i mogu da se pronađu informacije o njima. Ova analiza i u praksi treba da se sprovede (ne samo u cilju navođenja u ovom tekstu) da bi se jasno zacrtao put razvoja uređaja i da bi se donele ključne odluke na osnovu kojih se neka potencijalna rešenja odbacuju, a druga prihvataju.
%
%Ovakva analiza je jedan od ključnih elemenata inženjerskog razmišljanja i samim tim i jedan od ključnih ciljeva ovog projekta. Zbog toga je veoma važno da se u ovom odeljku navedu sva rešenja koja su razmatrana i da se obrazloži zašto je neko od njih usvojeno kao dobro, a neko drugo odbačeno kao neodgovarajuće za ovaj projekat.
%\vspace{10pt}

\pagebreak
\endgroup

\begingroup
\section{Hardverska realizacija projekta}

\vspace{10pt}

U ovom poglavlju se govori o pojedinačnim komponentama korišćenim u ovom projektu. O njihovim osnovnim karakteristika, prednostima i problemima. Mnoge komponente su izabrane zbog lake dostupnosti, da bi se u slučaju ponovne realzacije ili kavara lako pronašla zamena. Većina komponenti je povezana sa Arduino platformom koja je idealna za realizaciju ovakvih projekata. Glavne prednosti Arduino pltforme :

	\begin{itemize}
	
		\item Jednostavnost korišćenja: Arduino je dizajniran da bude jednostavan za upotrebu, čak i za početnike u elektronici i programiranju. Dolazi sa jednostavnom integrisanom razvojnom okolinom (IDE) koja omogućava brzo pisanje, kompajliranje i uploadovanje koda na Arduino mikrokontroler.
		\item Mala veličina: Arduino je veoma kompaktna platforma, što je čini idealnim za ugradnju u razne uređaje i projekte.
        \item Niska cena: Arduino pločice su veoma pristupačan, što ga čini odličnim izborom za hobiste, učenike i sve one koji žele da istražuju tehnologiju bez velikih finansijskih ulaganja.
        \item Širok spektar modela: Postoje različiti modeli Arduino pločica, od osnovnih do naprednih, sa različitim brojem ulazno/izlaznih pinova, radnim naponima i drugim karakteristikama. To omogućava korisnicima da odaberu pločicu koja najbolje odgovara njihovom projektu. Za ovaj projekat izabran je Arduino UNO R3 model.
        \item Mogućnost proširenja: Arduino pločice imaju mogućnost proširenja putem širokog spektra dodatnih modula, senzora, aktuatora i drugih komponenti koji se lako povezuju putem standardizovanih interfejsa kao što su digitalni i analogni pinovi, I2C, SPI, UART itd.
        \item Bogata podrška : Arduino ima ogromnu zajednicu korisnika i razvijalaca koji su voljni da dele svoje iskustva, znanje i projekte putem foruma, blogova, YouTube kanala i drugih platformi. Obilje  online resursa drastično olakšava učenje i rešavanje mnogih problema.
        \item Fleksibilnost i prilagodljivost: Arduino se može koristiti za različite svrhe, od jednostavnih projekata poput LED svetla ili automatskog zalivanja biljaka do složenijih projekata kao što su roboti, interaktivne instalacije ili kućna automatizacija. 
       
	\end{itemize}

\vspace{10pt}

Pored ovoliko prednosti bilo je lako odlučiti se za Arduino okruženje. Neće se ulaziti dataljnije u rad Arduono UNO R3 (Slika \ref{ref:Arduino}) uređaja jer je to van okvira ovog projeta. 

\begin{figure}[H]
\centering
\includegraphics[scale=0.17]{images/Arduino UNO R3}
\caption{Arduino UNO R3} \label{ref:Arduino}
\end{figure}

\pagebreak


	\subsection{DHT22}

\vspace{10pt}

Kao što je pomenuto u uvodnom delu komponenta koja je inspirisala ovaj projekat je senzor temperature i vlažnosti vazduha DHT22 (Slika \ref{ref:dht22pinssch}). Ovo je glavni senzor u ovom projekt i bilo je od velike važnosti da se izabere relativno precizan i pouzdan senzor. Zato nije izabran možda i više zatupljen senzor DHT11 koji ima manju preciznost. Dimenzije senzora iznose 36x16x9mm (DxŠxV). DHT22 poseduje 3 pina: VCC (5V), DAT (D12) pin i GND. Sve informacije su uzete iz DHT22 datasheet \ref{ref:DHT22-datasheet}. Osnovne karakteristike senzora su:

\begin{figure}[H]
\centering
\includegraphics[scale=0.4]{images/dht22pinssch}
\caption{DHT22 senzor i njegov šematik} \label{ref:dht22pinssch}
\end{figure}

\begin{itemize}
	\item Merenje temperature: DHT22 senzor omogućava precizno merenje temperature u opsegu od -40°C do +80°C sa tačnošću od ±0.5°C.
	\item Merenje vlage: Osim temperature, DHT22 senzor takođe meri relativnu vlažnost vazduha u opsegu od 0\% do 100\% sa tačnošću od ±2\%.
	\item Digitalni izlaz (8-bit): DHT22 senzor koristi digitalni interfejs za komunikaciju sa mikrokontrolerom, što olakšava integraciju u različite projekte.
	\item Jednostavno korišćenje: DHT22 senzor se lako povezuje sa mikrokontrolerima kao što su Arduino ili Raspberry Pi putem samo tri žice (napajanje, zemlja i digitalni signal).
	\item Pouzdanost: DHT22 senzor je relativno pouzdan i precizan u merenju temperature i vlage, što ga čini popularnim izborom za mnoge aplikacije.
\end{itemize}

\begin{table}[H]
\centering
\begin{tabular}{|l|c|c|c|c|c|}
\hline
& Uslov & Min & Tpično & Max & Jedinica\\
\hline
Napon & DC & 3.3 & 5 & 5.5 & V\\
\hline
Struja & Merena & 1.3 & 1.5 & 2.1 & mA\\
\hline
Struja & Prosečna & 0.5 & 0.8 & 1.1 & mA\\
\hline
Period kolektovanja & Vreme & 1.7 &  & 2 & Sekunde\\
\hline
\end{tabular}
\caption{Električne karakteristike DHT22} \label{ref:tabela-2}
\end{table}

Mane ovog senzora: 
\begin{itemize}
\item Brzina odgovora: DHT22 senzor može imati nešto sporiji odgovor u poređenju sa nekim drugim senzorima, što može biti problem u aplikacijama koje zahtevaju brze promene. Što se može videti iz tabele \ref{ref:tabela-2}.
\item Osetljivost na kondenzaciju: U uslovima visoke vlažnosti, DHT22 senzor može pokazivati greške zbog kondenzacije vode na površini senzora.
\end{itemize}

\pagebreak

	\subsection{BLDC 5V ventilator (Waveshare fan-4010-5v)}
	
	\vspace{10pt}
	
\begingroup
	
	Glavni aktuator ovog projekta je BLDC ventilator od 5V (Slika \ref{ref:DC40mm5V}). Motor jednosmerne struje bez četkica (BrushLess DC) je izabran zbog njegovih mnogih prednosti u odnosu na klasičan motor jednosmerne struje sa četkicama. Osnovna namena BLDC ventilatora koji je izabran za ovaj projekat je kao hladnjak za Raspberry Pi platformu. Zbog takve namene idealn je izbor za ovaj projekt. Povezanost sa popularnom i standardizovanom Raspberry Pi pltformom olakšava zamenu ovog ventilatora u slučaju njegovog kvara.  Malih je dimenzija zbog čeka se može lako uklopiti u billo kakav prostor sa lakoćom. Osnovne karakteristike ovog modela su: 
	

%Glavni aktuator ovog projekta je BLDC ventilator od 5V. Motor jednosmerne struje bez četkica (BrushLess DC) je izabran zbog njegovih mnogih prednosti u odnosu na klasičan motor jednosmerne struje sa četkicama. Osnovna namena BLDC ventilatora koji je izabran za ovaj projekat je kao hladnjak za Raspberry Pi platformu. Zbog takve namene idealn je izbor za ovaj projekt. Povezanost sa popularnom i standardizovanom Raspberry Pi pltformom olakšava zamenu ovog ventilatora u slučaju njegovog kvara.  Malih je dimenzija zbog čeka se može lako uklopiti u billo kakav prostor sa lakoćom. Osnovne karakteristike ovog modela su: 
\begin{itemize}
	\item Radni napon: 5V
	\item Snaga: 3.6W
	\item Konekcija: 2 pina
	\item Dimenzije: 40x40x10mm
\end{itemize}

\begin{wrapfigure}{R}{0.5\textwidth}
\centering
\includegraphics[width=0.5\textwidth]{images/DC40mm5V} 
\caption{Ventilator} \label{ref:DC40mm5V}
\end{wrapfigure}

\vspace{10pt}

Prednosti BLDC motora : 
\begin{enumerate}
	\item Velika brzina obrtanja 
	\item Veliki obrtni momenat 
	\item Odlične startne osobine 
	\item Velika efikasnost 
	\item Rad bez varničenja  
	\item Visoka pouzdanost  
	\item Dug vek eksploatacije
\end{enumerate}
\endgroup
\pagebreak
Jedina mana BLDC motora je složenost elektronske komutacije. Motoru je potrebna i informacija o ugaonom položaju rotora (stalnog magneta) kako bi spoljašnje drajvesko kolo koje vrši komutaciju, donelo odluku kada treba izvršiti preusmeravanje struje kroz namotaje. Praćenje položaja rotor najčešće se vrši primenom Holovih senzora(senzora magnetnog polja).

\vspace{10pt}

Glavni način kontrolisanja BLDC ventilatora u ovom projektu je realizovan korišćenjem  PWM (Pulse Width Modulation) signala (Slika \ref{ref:pwm}) i sa jednim 2N2222A NPN tranzistorom. VCC motora je spojen na 5V a GND motora na kolektor tranzistora. Emiter tranzistora se spaja na GND, a baza na D10 pin Arduina sa kojeg se šalje kontrolni signal. Brzina motora je direktna posledica vrednosti fatkora ispune (odnosom trajanja visokog i niskog naponskog nivoa u toku jedne periode) koji se šalje iz Arduina. Za svaki 1°C povećanja merene vrednosi vrednost faktora ispune se povećava za 20\% sve dok ne dođe do 100\% kada ventilator na maxsimalnoj svojoj brzini. 

\vspace{10pt}

\begin{figure}[H]
\centering
	\includegraphics[width=0.7\textwidth]{images/pwm}
	\caption{Primer povećanja faktora ispune u PWM signalu} \label{ref:pwm}
\end{figure}
\pagebreak

	\subsection{Piezo zujalica (MH-FMD)}
	
	Ovaj aktuator (Slika \ref{ref:buzzer}) je dodat kako bi projekat imao još jedan dodatni način interakcije sa korisnikom. Princip rada piezoelektrične zujalice je zasnovan na dovođenju struje na piezo-električni disk koji je spojen sa tankom metalnom pločom. Piezo-električni disk osciluje zbog čega dolazi do savijanja metala napred-nazad. To savijanje metala prouzrokuje zvuk. Obično se koristi kao zvični alarm ili uzbuna. Frekvencija je ono što omogućava piezo zujalicu da proizvede zvuk. Evo nekih karakteristika piezo zujalica:
\begin{itemize}
	\item Što se brže metal savija, to je veći nivo buke koja se proizvodi.
	\item Ova stopa se zove frekvencija.
	\item Što je veća frekvencija, to je veća buka koju čujemo
	\item Opseg radne temperature od -40°C do 85°C
	\item Opseg frekvencije ulazne 2-5kHz (kvadratni signal)
	\item Dimenzije: 32x13x13mm
\end{itemize}

\vspace{10pt}

	Pasivna zujalica korišćena u ovom projektu poseduje 3 pina: VCC (5V), I/O (D11) pin i GND. Neki od nedostataka su ako je potrebna frekvencija van opsega zujalice, i nemogućnost zujanja više zujalica u istom trenutku. Zujalica u ovom projektu ima zadatak da upozori korisnika na problematične vrednosti vlažnosti vazduha koju senzor DHT22 meri. U slučaju ovog projekta to su vrednosti od 30\% kao donja granica i 80\% kao gornja.
	
\begin{figure}[H]
\centering
\includegraphics[scale=0.2]{images/buzzer}
\caption{Piezo-električna zujalica} \label{ref:buzzer}
\end{figure}

\vspace{10pt}

\pagebreak

	\subsection{LCD I2C 16x2}
	
	Kao osnovni način prikazivanja merenih vrednosti izabran je LCD 16x2. Pošto se broj slobodnih pinova smanjivao kako su se dodavali novi elementi u projekat, broj od 16 pinova potreban za povetivanje LDC displeja je postao problem. Rešenje ovog problema je bilo spajanje na I2C modul (Slika \ref{ref:I2CLCD}) koji drastično smanjuje broj potrebnih pinova sa 16 na 4. I2C (Inter-Integrated Circuit) je serijski protokol komunikacije koji omogućava digitalnim uređajima da razmenjuju podatke i komande putem dva voda - Serial Data (SDA) i Serial Clock (SCL). Pinovi ovog modula su GND, VCC (5V), SDA i SCL. Arduiono UNO R3 već poseduje SDA i SCL pinove baš za ovu upotrebu, ali se mogu koristiti i ostali analogni pinovi kao npr. pin A4 i A5. Dimenzije LCD-a sa I2C modulom iznose 80x36x19.25mm
	
	\begin{figure}[H]
\centering
\includegraphics[scale=0.6]{images/I2CLCD}
\caption{LCD 16x2 sa I2C modulon} \label{ref:I2CLCD}
\end{figure}
	


	\subsection{4x4 tastatura}
	
	Poslednji elemenat koji će poboljšati korisničko iskustvo je senzor dodira tj. 4x4 tastatura. Tastatura se sa stoji između dva sloja. Jeden je spoj svih redova, a drugi svih kolini. Pritiskom se pravi kontakt između ova dva sloja čime se i determiniše koji je taster pritisnut. Za sve izabrane funkcionalnosti iskorišćeno je smo prve dve redove i 4 kolone. Tako da od ukupnog broja pinova kojih je 8 ovde se koriste samo 6 (2 za redove i 4 za kolone). Pinovi su spojeni na sledeće portove Arduina C1->D5, C2->D4, C3->D3, C4->D2, R1->D9 i R2->D8. Funkcionalnosti tastera biće objašnjne u sledećem poglavlju.
	
\pagebreak


	\subsection*{Šema kola projekta} \label{ref:circuit_diagram}
	
\begin{figure}[H]
\centering
\rotatebox{270}{\includegraphics[scale=0.5]{images/circuit_diagram}} 
\end{figure}

\vspace{10pt}

\pagebreak
\endgroup

\begingroup
\sloppy

\section{Softverska realizacija projekta}

\vspace{10pt}

U ovom poglavlju se govori u kratkim crtama o kodu koji pokreće hardver projekta. Kod je izrađen u Arduino okruženju, a nalazi se na \textbf{\texttt{\href{https://github.com/vgalovic/temperature-and-humidity-regulator.git}{Github repozitorijumu}}}. Kod projekta se nalazi u  \textbf{\texttt{\href{https://github.com/vgalovic/temperature-and-humidity-regulator/blob/main/code/code.ino}{code/code.ino}}}. Evo detaljnog objašnjenja korisničkog interfejsa:
 
\begin{enumerate}

	\item \texttt{Tastatura}: Korisnik može koristiti tastaturu sa četiri kolone i dva reda za navigaciju i izbor opcija. Na tastaturi su raspoređeni tasteri od 1 do 8 koji imaju različite funkcije:
	\begin{itemize}
		\item Tasteri od 1 do 4 služe za odabir različitih režima rada sistema, uključujući prebacivanje između prikaza temperature/vlažnosti i brzine ventilatora/stanja zvučnog alarma, kao i testiranje brzine ventilatora i zvučnog alarma.
        \item Tasteri 5 i 6 se koriste za uključivanje i isključivanje debug moda i podešavanje prilagođenih parametara za granice vlažnosti i temperature.
        \item Taster 8 se koristi za čišćenje LCD ekrana.
	\end{itemize}
	
	
  	\item \texttt{LCD ekran}: Na LCD ekranu su prikazane različite informacije o sistemu:
  	\begin{itemize}
  		\item Temperatura i vlažnost: Prikazuje se trenutna temperatura u stepenima Celzijusa i vlažnost u procentima.
       	\item Brzina ventilatora i stanje zvučnog alarma: U ovom režimu se prikazuju informacije o brzini ventilatora (izražene u procentima) i stanju zvučnog alarma (uključen ili isključen).
		\item Indikacija Testiranja ventilatora/zvučnog alarma
  	\end{itemize}
  	
  	\item \texttt{ Serijal port}: Dijagnostički podaci u debug modu: Kada je debug mod aktiviran, prikazuju se dijagnostičke informacije preko serijskog porta, dok na LCD ekranu je ispisana brzina prenosa bita po sekundi.
\end{enumerate}

U daljem nastavku poglavalja, biće nabrojane sve biblioteke, makroi, promenljive i funkcije kao i objšnjenje šta oni rade unutar koda.
    
\vspace{10pt}

	\subsection{Biblioteke}
	\begin{itemize}
    		\item \textbf{Keypad}: Koristi se za interakciu sa tastaturom. Github stranica do ove biblioteke je na sledećem \textbf{\texttt{\href{https://github.com/Chris--A/Keypad.git}{linku}}}.
    		
    		\item \textbf{LiquidCrystal\_I2C}: Pomoću nje se kontroliše LCD putem I2C komunikacije. Stranica sajta arduina za preuzimanje biblioteke nalazi se na sledećem \textbf{\texttt{\href{https://downloads.arduino.cc/libraries/github.com/marcoschwartz/LiquidCrystal_I2C-1.1.2.zip}{linku}}}. 
    		
    		\item \textbf{DHT22}: Omogućava čitanje podataka sa DHT22 senzora. Github stranica do ove biblioteke je na sledećem \textbf{\texttt{\href{https://github.com/Chris--A/Keypad.git}{linku}}}.
	\end{itemize}

\newpage

	\subsection{Makroi}

\vspace{10pt}

\begin{enumerate}

	\item \textbf{Pinske Definicije Tastature}:

	\begin{itemize}
    		\item \texttt{R1}, \texttt{R2}: Brojevi pinova za konekciju redova tastature.
    		\item \texttt{C1}, \texttt{C2}, \texttt{C3}, \texttt{C4}: Brojevi pinova za konekciju kolona tastature.
	\end{itemize}

	\item \textbf{Dimenzije Tastature}:
	\begin{itemize}
    		\item \texttt{ROWS}, \texttt{COLS}: Broj redova i kolona u matrici tastature.
	\end{itemize}
	\item \textbf{LCD Konfiguracija}:
	\begin{itemize}
		\item \texttt{I2C\_PORT}: I2C adresa LCD ekrana.
    		\item \texttt{TOTAL\_COLUMNS}, \texttt{TOTAL\_ROWS}: Broj kolona i redova na LCD ekranu.
	\end{itemize}
	\item \textbf{Pinovi}:
	\begin{itemize}
    		\item \texttt{PWM, BUZZ, DHT}: Pinovi za PWM, zvučnik i DHT22 senzor.
	\end{itemize}

	\item \textbf{Koraci Prilagođavanja}:
	\begin{itemize}
    		\item \texttt{HUMIDITY\_STEP}, \texttt{TEMPERATURE\_STEP}: Veličine koraka za prilagođavanje granica vlažnosti i temperature.
	\end{itemize}

	\item \textbf{Debug i Vremenski Parametri}:
	\begin{itemize}
		\item \texttt{DEBUG\_SERIAL\_BAUDRATE}: Brzina prenosa bita po sekundi za serijsku komunikaciju u debug režimu.
		\item \texttt{DEBOUNCE\_TIME}: Vreme debaunsa za tastaturu.
		\item \texttt{BUZZER\_DELAY}: Vreme kašnjenja za zvučnik.
		\item \texttt{DELAY\_IN\_SETUP}: Kašnjenje na kraju \texttt{setup()} funkcije.
		\item \texttt{DHT\_UPDATE\_INTERVAL}: Interval za ažuriranje temperatura i vlažnosti sa DHT22 senzora.
		\item \texttt{FAN\_SPEED\_UPDATE\_INTERVAL}: Interval za ažuriranje brzine ventilatora na osnovu temperature.
	\end{itemize}
	
	
	\item \textbf{Podrazumevane Vrednosti}:
	\begin{itemize}
    		\item \texttt{DEFAULT\_HUMIDITY\_MIN}, \texttt{DEFAULT\_HUMIDITY\_MAX},\\ \texttt{DEFAULT\_TEMPERATURE\_MIN}:
    		\\ Podrazumevane minimalne i maksimalne granice vlažnosti i podrazumevana minimalna granica temperature.
	\end{itemize}

\pagebreak

	\item \textbf{Prilagođavanje Vlažnosti i Temperature}:
	\begin{itemize}
    		\item \texttt{HUMIDITY\_MIN\_LOWER\_LIMIT}, \texttt{HUMIDITY\_MIN\_UPPER\_LIMIT}:\\ Donja i gornja granica za prilagođavanje minimalne granice vlažnosti.
    		\item \texttt{HUMIDITY\_MAX\_LOWER\_LIMIT}, \texttt{HUMIDITY\_MAX\_UPPER\_LIMIT}:\\ Donja i gornja granica za prilagođavanje maksimalne granice vlažnosti.
    		\item \texttt{TEMPERATURE\_MIN\_LOWER\_LIMIT}, \texttt{TEMPERATURE\_MIN\_UPPER\_LIMIT}:\\ Donja i gornja granica za prilagođavanje minimalne granice temperature.
	\end{itemize}

	\item \textbf{Koraci Prilagođavanja}:
	\begin{itemize}
    		\item \texttt{HUMIDITY\_STEP}, \texttt{TEMPERATURE\_STEP}: Veličine koraka za prilagođavanje granica vlažnosti i temperature.
	\end{itemize}

\end{enumerate}


	\subsection{Promenljive}

\vspace{10pt}

\begin{enumerate}
    \item \textbf{action\_state}:
        \begin{itemize}
            \item \textbf{Tip}: Enumeracija
            \item \textbf{Opis}: Predstavlja trenutno stanje sistema. Moguća stanja uključuju:
                \begin{itemize}
                    \item \texttt{NORMAL\_DISPLAY}: Normalni prikaz za prikazivanje temperatura i vlažnosti vazdiha ili brzinu ventilatora i stanje zvučnika.
                    \item \texttt{DEBUG\_MODE}: Režim za debagiranje za prikaz dijagnostičkih informacija sa DHT22 senzora.
                    \item \texttt{FAN\_TEST}: Režim za testiranje brzine ventilatora.
                    \item \texttt{BUZZER\_TEST}: Režim za testiranje zvučnika.
                \end{itemize}
        \end{itemize}
        
    \item \textbf{display\_state}:
        \begin{itemize}
            \item \textbf{Tip}: Logička
            \item \textbf{Opis}: Kontroliše da li LCD ekran prikazuje očitavanja temperature i vlažnosti (\texttt{true}) ili brzinu ventilatora i stanje zvučnika (\texttt{false}).
        \end{itemize}
        
    \item \textbf{debug\_enable}:
        \begin{itemize}
            \item \textbf{Tip}: Logička
            \item \textbf{Opis}: Određuje da li je režim za debagiranje omogućen (\texttt{true}) ili nije (\texttt{false}), što omogućava dijagnostičke informacije sa DHT22 senzora.
        \end{itemize}
        
    \item \textbf{humidity\_min}, \textbf{humidity\_max}, \textbf{temperature\_min}:
        \begin{itemize}
            \item \textbf{Tip}: Broj (Unsigned 8-bit integer)
            \item \textbf{Opis}: Definiše minimalne i maksimalne pragove vlažnosti (\textbf{humidity\_min}, \textbf{humidity\_max}) i minimalni prag temperature (\textbf{temperature\_min}) za sistem.
        \end{itemize}
        
    \item \textbf{en\_mill}:
        \begin{itemize}
            \item \textbf{Tip}: Unsigned long
            \item \textbf{Opis}: Čuva trenutno vreme u milisekundama za potrebe vremenskog merenja u glavnoj petlji.
        \end{itemize}
\end{enumerate}

\newpage

	\subsection{Funkcije}

\vspace{10pt}

\begin{enumerate}[label=\arabic*.,leftmargin=*]
    \item \textbf{buzzControl(humidity)}:
        \begin{enumerate}[label={},leftmargin=*]
            \item Proverava da li vlažnost pada ispod minimalnog praga ili prelazi preko maksimalnog praga i aktivira zvučnik prema tome. Vraća \texttt{true} ako je zvučnik aktiviran.
        \end{enumerate}
        
    \item \textbf{dcFanControl(temperature)}:
        \begin{enumerate}[label={},leftmargin=*] 
            \item Prilagođava brzinu ventilatora na osnovu temperature. Vraća procenat brzine ventilatora.
        \end{enumerate}
        
    \item \textbf{display()}:
        \begin{enumerate}[label={},leftmargin=*]
            \item Dobavlja očitavanja temperature i vlažnosti vazduha sa DHT22 senzora, kontroliše brzinu ventilatora i stanje zvučnika, i prikazuje relevantne informacije na LCD ekranu.
        \end{enumerate}
        
    \item \textbf{debugMode()}:
        \begin{enumerate}[label={},leftmargin=*] 
            \item Prikazuje dijagnostičke informacije sa DHT22 senzora u režimu za debagiranje.
        \end{enumerate}
        
    \item \textbf{action()}:
        \begin{enumerate}[label={},leftmargin=*] 
            \item Vrši akcije na osnovu trenutnog stanja sistema, uključujući prikaz normalnih informacija, ulazak u režim za debagiranje ili izvođenje testova ventilatora i zvučnika.
        \end{enumerate}
        
    \item \textbf{keypadEvent(key)}:
        \begin{enumerate}[label={},leftmargin=*] 
            \item Upravlja događajima tastature i izvodi odgovarajuće akcije na osnovu pritisnutog tastera.
        \end{enumerate}
        
    \item \textbf{setParameters()}:
        \begin{enumerate}[label={},leftmargin=*] 
            \item Omogućava korisnicima postavljanje prilagođenih parametara za pragove vlažnosti i temperature koristeći tastaturu.
        \end{enumerate}
        
    \item \textbf{setup()}:
        \begin{enumerate}[label={},leftmargin=*] 
            \item Inicijalizuje sistem, uključujući postavljanje pinova, LCD ekrana i inicijalizaciju parametara.
        \end{enumerate}
        
    \item \textbf{loop()}:
        \begin{enumerate}[label={},leftmargin=*] 
            \item Glavna petlja sistema, gde se akcije vrše periodično na osnovu vremenskih intervala.
        \end{enumerate}
\end{enumerate}

\pagebreak
\endgroup

\section{Rezultati testiranja}

\vspace{10pt}

	\subsection{Testiranja}


\vspace{10pt}

		\subsubsection*{Testiranje merenja vlage senzora DHT22}
		
\begin{center}
\begin{tikzpicture}
\centering
\begin{axis}[width=\linewidth, height=12cm,
	title={Testiranje merenja vlage senzora DHT22},
    xlabel={Time [s]},
	ylabel={Humidity [\%]},        
    label style={font=\small},
	xmin=0, xmax=40,    
    ymax=100,
    legend pos=north west,
    ymajorgrids=true,
    grid style=dashed]
     
\addlegendentry{Voda: 25.0 °C}
\addplot[no marks, color=blue] table[x=Time, y=Humidity]{tests/humidity/test1.txt};

\addlegendentry{Voda: 30.0 °C}
\addplot[no marks, color=green] table[x=Time, y=Humidity]{tests/humidity/test2.txt};

\addlegendentry{Voda: 35.0 °C}
\addplot[no marks,  color=yellow] table[x=Time, y=Humidity]{tests/humidity/test3.txt};

\addlegendentry{Voda: 45.0 °C}
\addplot[no marks,  color=orange] table[x=Time, y=Humidity]{tests/humidity/test4.txt};

\addlegendentry{Voda: 55.0 °C}
\addplot[no marks,  color=red] table[x=Time, y=Humidity]{tests/humidity/test5.txt};

\end{axis}
\end{tikzpicture}
\end{center}	

\pagebreak

		\subsubsection*{Testiranje merenja temperature senzora DHT22}
		
\begin{center}
\begin{tikzpicture}
\centering
\begin{axis}[width=\linewidth, height=8cm,
	title={Testiranje merenja temperature senzora DHT22},
	xlabel={Time [s]},    
    ylabel={Temperature [°C]},
    label style={font=\small},
    xmin=0, xmax=650,
	ymax=200,
    legend pos=north west,
    ymajorgrids=true,
    grid style=dashed]
     
\addlegendentry{DHT22}
\addplot[no marks, color=blue] table[x=Time, y=Temperature]{tests/temperature/test1.txt};

\addlegendentry{Kuhinjski termometar(TP300)}
\addplot[no marks, color=red] table[x=Time, y=Temperature]{tests/temperature/test2.txt};

\end{axis}
\end{tikzpicture}
\end{center}			


%Nakon što je uređaj izrađen može se pristupiti njegovom testiranju. Testiranje podrazumeva proveru performansi u praksi.
%
%\vspace{10pt}
%
%Testiranje treba da bude primereno datom konkretnom uređaju. Kakvo će testiranje biti primereno treba utvrditi konsultacijom odgovarajuće literature i dogovorom sa mentorom. Na primer, za pojačavač je merodavno koliku snagu može da isporuči bez vidnih izobličenja, za izvor napajanja je bitan opseg izlaznog napona i strujno ograničenje. Za složenije sisteme može biti potrebno da se osmisli celokupan algoritam provere funkcionalnosti.
%
%\vspace{10pt}
%
%Treba proveriti i u ovom odeljku opisati koliko uređaj uspešno obavlja zadatak za koji je projektovan. To treba potkrepiti merenjima ulaznih test signala, izlaznih signala i unutrašnjih signala koji predstavljaju nekakav međurezultat. Mogu se dati tabele sa rezultatima, frekvencijske karakteristike, slike dobijene pomoću oscilokopa i slično ukoliko to može da koristi u predočavanju performansi.
\pagebreak

\begingroup
\justifying
\section{Zaključak}

\vspace{10pt}

%Ovaj odeljak je obavezan. Naslov takođe mora ostati nepromenjen. Možemo ga podeliti na dva dela:
%
%\begin{itemize}
%	\item Zaključak o uspešnosti i meri završenosti projekta,
%	\item Rezime projekta.
%\end{itemize}
%
%\vspace{10pt}
%
%Veoma je važno na samom početku ovog dela jasno reći da li je urađeno sve ono što je bilo definisano projektnim zadatkom. Ako ima odstupanja od toga, onda kratko objasniti koja su to odstupanja i zašto su nastala. Ako su nastala odstupanja od definisanog projekta, napisati u kom mestu u radu mogu da se nađu detaljnije informacije o tome.
%
%\vspace{10pt}
%
%Rezime je mesto gde se pravi osvrt na ono što je urađeno u projektu, ili naučnom radu. Dužina rezimea može da bude od dva do tri pasusa. Prvi pasus je obavezan i predstavlja pregled onoga što je urađeno. U njemu se u kratkim crtama nabroji ono što je opisano u tekstu koji predhodi zaključku. Npr. može se sa po jednom rečenicom ponoviti suština ili rezulat svakog odeljka koji je napisan pre zaključka. Ovaj pasus je obavezan.
%
%\vspace{10pt}
%
%Drugi pasus može ukratko da ponovi ono što je nesumnjivi zaključak celog rada i koji treba da bude posebno istaknut kao vredan rezultat. Ovaj pasus nije obavezan.
%
%\vspace{10pt}
%
%Treći pasus je obavezan i predstavlja mesto gde mogu ukratko da se navedu ideje koje su se javile tokom izrade projekta ili pisanja rada i predstavljaju dalje moguće pravce razvoja konkretnog uređaja ili nove oblasti koje autor rada namerava u bliskoj budućnosti da istraži.
\pagebreak
\endgroup

\begingroup
\sloppy

\section{Literatura}

\vspace{10pt}

%Ovaj odeljak je obavezan. Ne treba da sadrži nikakav drugi tekst osim spiska literature. Literatura može da bude stručna knjiga, udžbenik, zbirka zadataka, praktikum, standard, članak iz časopisa, naučni rad, web-sajt (daje se poslednji važeći link na njega), tehnička dokumentacija (manual ili datasheet). Spisak se daje kao numerisana lista gde su za svaku stavku dati relevantni podaci ukoliko su poznati. Tu spadaju: autor(i), naslov, izdavač, godina izdanja, stranice u slučaju časopisa ili zbornika radova itd. Ovaj tekst obavezno obrisati. Na kraju odeljka dat je primer spiska literature.
%
%\vspace{10pt}
%
%Svrha navođenja literature je da se čitoaocu ukaže na mesta gde može naći detaljnije informacije o pojedinostima koje se pominju u tekstu. Takođe, reference ističu da se ovaj rad nadovezuje na neka od ranije poznata znanja. Uobičajeno je da se kategoričke tvrdnje koje se ne dokazuju u ovom radu potkrepljuju navođenjem literature u kojoj je to obrazloženo ili dokazano. U takvim slučajevima se neposredno iza navedene tvrdnje navodi oznaka literature, najčešće ka broj u uglastim zagradama npr. [2] predstavlja pozivanje na knjigu "Infrared Sensors" iz primera literature.
%
%
\begin{enumerate}[label={[\arabic*]}, leftmargin=2.5cm]
	\item Datasheet od DHT22: \label{ref:DHT22-datasheet}\\ \url{https://cdn-shop.adafruit.com/datasheets/DHT22.pdf}	
	\item Manual za Teromometar TP300: \label{ref:TP300}\\ \url{https://dpstar.com.my/wp-content/uploads/2020/04/ecostar-TP-300-Series-Need-Probe-Digital-Thermometer\%E2\%80\%93Dpstargroup.pdf}	
%	\item Ime Prezime Autora, Kuvar elektronike, FTN, Novi Sad, 2008.
%	\item T. K. Webber, Infrared Sensors, MCMillan, 2002.
\end{enumerate}
\renewcommand{\theenumi}{\arabic{enumi}}

\pagebreak
\endgroup

\end{document}


%\section{Proračuni i simulacioni rezultati}
%
%\vspace{10pt}
%
%Ovom odeljljku se može promeniti naslov u pojedinim projektima. Za neke probleme simulacija će biti glavni izvor informacija, za neke druge pak proračun na papiru. Često se mogu i uporediti rezultati ta dva pristupa.
%
%\vspace{10pt}
%
%Moguće je čak i razdvojiti ovaj odeljak na više manjih ukoliko se smatra za potrebno.
%
%\vspace{10pt}
%
%U ovom odeljku (ili u odeljcima vezanim za njega) treba dati principske (a nekad i precizne) šeme pojedijih elemenata sistema i po potrebi dimenzionisati pojedine komponente na osnovu simulacija ili proračuna. Proračuni mogu biti obimni i često nije dobra ideja opterećivati tekst velikom količinom formula – zbog toga se sami proračuni mogu izmestiti u jedan od dodataka na kraju teksta, a u sam glavni tekst se tada dodaje samo referenca (poziv) na odgovarajući dodatak.
%
%\vspace{10pt}
%
%Same formule ukoliko ih ima treba da budu numerisane kao u primeru ispod:
%
%\begin{align}
%I_{CQ}= \frac{ V_{CC}-V_T-V_{BE} }{ \left(R_B+R_E h_{FE}+1 \right) }h_{FE}  \label{Icq}
%\end{align}
%
%\vspace{10pt}
%
%Preko broja jednačine može se pozivati na određenu jednačinu u tekstu, npr vidi jednačinu broj \ref{Icq}.
%
%\vspace{10pt}
%
%Simulacioni rezultati mogu da potiču iz različitih softvera. Mogu to biti simulatori električnih kola (DC, AC, tranzijentne, Monte Carlo analize), a i simulatori opšteg tipa ili neki drugi softverski inženjerski alat.
%
%\pagebreak
%
%\section{Opis detalja predmeta projekta}
%
%\vspace{10pt}
%	
%	\subsection{Detaljan opis svih podsistema uređaja}
%
%\vspace{10pt}
%	
%	Ne treba opisivati pojedinačne komponente ukoliko su one široko poznate (poput otpornika, kondenzatora, tranzistora, operacionih pojačavača). Ako je pak neki od njih poseban i po svojim karakteristikama ključan za rad uređaja, treba ga adekvatno pomenuti. Specijalne senzore i integrisana kola treba pomenuti posebno jer njihovi detalji obično nisu svakom poznati.
%
%\vspace{10pt}
%
%Važno je ovaj deo ne preopterećivati velikim šemama nego šeme podsklopova uređaja treba davati pojedinačno u delovima iz kojih je jasan njihov način rada. Poželjno je dati blok šemu kompletnog uređaja iz kog je jasan princip rada sistema i na osnovu kog se mogu objasniti uloge pojedinačno navedenih podsklopova.
%
%\vspace{10pt}
%
%Celokupnu šemu kao i dokumentaciju bitnih komponenti treba dati u dodacima (na kraju rada), a u ovom odeljku treba samo skrenuti pažnju čitaocu (upućivati ga na dodatke i literaturu) gde će naći detaljnije informacije.

%\vspace{10pt}
%
%	\subsection{Slika uređaja u krajnjem stadijumu izrade}
%
%\vspace{10pt}
%
%Poželjno je u tekst staviti barem jednu sliku gotovog uređaja, čak i ako je on konačno izrađen samo na protobordu. To treba da bude što je moguće reprezentativnija slika koja na očigledan način pokazuje i dokazuje da je uređaj zaista napravljen i da se po mogućstvu vidi i njegova funkcija i način rada.


%\begingroup
%\section*{Dodatak A}
%	\addcontentsline{toc}{section}{Dodatak A}
%
%\vspace{10pt}
%
%Dodaci su obično obeleženi slovima i tako se na njih i poziva. Poželjno je takođe da svaki dodatak počne na novoj strani.
%
%\vspace{10pt}
%
%U dodatke mogu da se stave i najvažniji dokumenti koji se odnose na pojedine komponente i podsklopove (kupljenje kao gotove celine) – tzv. Datasheet. 
%
%\vspace{10pt}
%
%\begin{lstlisting}[style=Arduino]
%#include <SD.h>
%
%File logfile;
%byte logPin = 10;
%
%void setup() {
%  SD.begin(logPin);
%
%  ///////// Create a new file //////////
%  char filename[] = "LOGGER00.CSV";
%  for (int i = 0; i < 100; i++) {
%    filename[6] = i/10 + '0';    // number the file
%    filename[7] = i%10 + '0';    //
%    if ( SD.exists(filename)==false ) { // only open a new file if it doesn't exist
%      logfile = SD.open(filename, FILE_WRITE);
%      break;  // leave the loop!
%    }
%  }
%}
%
%void loop() {
%  // put your main code here, to run repeatedly:
%  logfile.println("Hello");
%  logfile.flush();
%  delay(1000);
%}
%\end{lstlisting}
%\endgroup\grid
